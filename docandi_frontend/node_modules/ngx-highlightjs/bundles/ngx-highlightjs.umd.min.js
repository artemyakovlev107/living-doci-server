!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("rxjs"),require("rxjs/operators")):"function"==typeof define&&define.amd?define("ngx-highlightjs",["exports","@angular/core","rxjs","rxjs/operators"],e):e(t["ngx-highlightjs"]={},t.ng.core,null,t.Rx.Observable.prototype)}(this,function(t,n,o,h){"use strict";var i=new n.InjectionToken("OPTIONS"),r=function(){function t(t){this.options={theme:"github",path:"assets/lib/hljs",auto:!0},this._isReady$=new o.BehaviorSubject(!1),this.options=Object.assign({},this.options,t),"undefined"!=typeof hljs?(hljs.configure(this.options.config),this._isReady$.next(!0)):(this._loadScript(),this._loadTheme())}return Object.defineProperty(t.prototype,"isReady",{get:function(){return this._isReady$.pipe(h.filter(function(t){return t}),h.take(1))},enumerable:!0,configurable:!0}),t.prototype.highlight=function(t,e,i,n){if("undefined"!=typeof hljs)return hljs.highlight(t,e,i,n)},t.prototype.highlightAuto=function(t,e){if("undefined"!=typeof hljs)return hljs.highlightAuto(t,e)},t.prototype.fixMarkup=function(t){if("undefined"!=typeof hljs)return hljs.fixMarkup(t)},t.prototype.highlightBlock=function(t){"undefined"!=typeof hljs&&hljs.highlightBlock(t)},t.prototype.configure=function(t){"undefined"!=typeof hljs&&hljs.configure(this.options.config)},t.prototype.initHighlighting=function(){"undefined"!=typeof hljs&&hljs.initHighlighting()},t.prototype.initHighlightingOnLoad=function(){"undefined"!=typeof hljs&&hljs.initHighlightingOnLoad()},t.prototype.registerLanguage=function(t,e){"undefined"!=typeof hljs&&hljs.registerLanguage(t,e)},t.prototype.listLanguages=function(){if("undefined"!=typeof hljs)return hljs.listLanguages()},t.prototype.getLanguage=function(t){if("undefined"!=typeof hljs)return hljs.getLanguage(t)},t.prototype._loadScript=function(){var t=this,e=document.createElement("script");e.async=!0,e.type="text/javascript",e.onload=function(){hljs.configure(t.options.config),t._isReady$.next(!0)},e.src=this.options.path+"/highlight.pack.js",document.head.appendChild(e)},t.prototype._loadTheme=function(){var t=document.createElement("link");t.rel="stylesheet",t.type="text/css",t.href=this.options.path+"/styles/"+this.options.theme+".css",document.head.appendChild(t)},t}();r.decorators=[{type:n.Injectable}],r.ctorParameters=function(){return[{type:undefined,decorators:[{type:n.Optional},{type:n.Inject,args:[i]}]}]};var e=function(){function t(t,e,i){this.renderer=e,this.hljs=i,this.highlighted=new n.EventEmitter,this.el=t.nativeElement}return Object.defineProperty(t.prototype,"setCode",{set:function(t){var e=this;this.code=t,this.hljs.isReady.subscribe(function(){return e.highlightElement(e.el,t)})},enumerable:!0,configurable:!0}),t.prototype.ngOnInit=function(){var t=this;!this.code&&this.hljs.options.auto&&this.hljs.isReady.subscribe(function(){t.highlightTextContent(),t.domObs=new MutationObserver(function(){return t.highlightTextContent()}),t.domObs.observe(t.el,{childList:!0,subtree:!0})})},t.prototype.highlightTextContent=function(){this.highlight?"all"===this.highlight?this.highlightChildren(this.el,"pre code"):this.highlightChildren(this.el,this.highlight):"code"===this.el.tagName.toLowerCase()?this.highlightElement(this.el,this.el.innerText.trim()):console.warn("[HighlightDirective]: Use 'highlight' on <code> element only")},t.prototype.highlightElement=function(t,e){var i=this.hljs.highlightAuto(e,this.language);i.value!==t.innerHTML&&(this.renderer.addClass(t,"hljs"),this.renderer.setProperty(t,"innerHTML",i.value),this.highlighted.emit(i))},t.prototype.highlightChildren=function(t,e){var i=this,n=t.querySelectorAll(e);o.from(n).pipe(h.filter(function(t){return 1===t.childNodes.length&&"#text"===t.childNodes[0].nodeName}),h.map(function(t){return i.highlightElement(t,t.innerText.trim())}),h.take(1)).subscribe()},t.prototype.ngOnDestroy=function(){!this.code&&this.hljs.options.auto&&this.domObs.disconnect()},t}();function s(t){return new r(t)}e.decorators=[{type:n.Directive,args:[{selector:"[highlight]"}]}],e.ctorParameters=function(){return[{type:n.ElementRef},{type:n.Renderer2},{type:r}]},e.propDecorators={highlight:[{type:n.Input}],language:[{type:n.Input}],setCode:[{type:n.Input,args:["code"]}],highlighted:[{type:n.Output}]};var l=function(){function e(){}return e.forRoot=function(t){return{ngModule:e,providers:[{provide:i,useValue:t},{provide:r,useFactory:s,deps:[i]}]}},e}();l.decorators=[{type:n.NgModule,args:[{declarations:[e],exports:[e]}]}],t.HighlightModule=l,t.HighlightJS=r,t.HighlightDirective=e,t.ɵa=s,t.ɵb=i,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=ngx-highlightjs.umd.min.js.map
