{
  "version": 3,
  "file": "highlight.directive.js",
  "sources": [
    "ng://ngx-highlightjs/projects/ngx-highlightjs/src/lib/highlight.directive.ts"
  ],
  "sourcesContent": [
    "import { Directive, ElementRef, Renderer2, OnDestroy, Input, Output, EventEmitter, OnInit } from '@angular/core';\r\nimport { HighlightJS } from './highlight.service';\r\nimport { HighlightResult } from './highlight.model';\r\nimport { from } from 'rxjs';\r\nimport { map, take, filter, tap} from 'rxjs/operators';\r\n\r\n/** There are 2 ways to higlight a code\r\n *  1 - using the [code] input (default) <code highlight [code]=\"yourCode\"></code>\r\n *  2 - using element text content <code> {{yourCode}} </code>\r\n */\r\n\r\n@Directive({\r\n  selector: '[highlight]'\r\n})\r\nexport class HighlightDirective implements OnInit, OnDestroy {\r\n\r\n  el: HTMLElement;\r\n  domObs: MutationObserver;\r\n  code: string;\r\n  @Input() highlight: string;\r\n  @Input() language: string[];\r\n  @Input('code')\r\n  set setCode(code: string) {\r\n    this.code = code;\r\n    this.hljs.isReady.subscribe(() => this.highlightElement(this.el, code));\r\n  }\r\n\r\n  @Output() highlighted = new EventEmitter<HighlightResult>();\r\n\r\n  constructor(el: ElementRef, private renderer: Renderer2, private hljs: HighlightJS) {\r\n    this.el = el.nativeElement;\r\n  }\r\n\r\n  ngOnInit() {\r\n\r\n    /** Acitvate MutationObserver if `auto` option is true and `[code]` input is not used\r\n     * This will highlight using the text content */\r\n    if (!this.code && this.hljs.options.auto) {\r\n\r\n      this.hljs.isReady.subscribe(() => {\r\n        this.highlightTextContent();\r\n\r\n        /** Highlight when text content changes */\r\n        this.domObs = new MutationObserver(() => this.highlightTextContent());\r\n        this.domObs.observe(this.el, { childList: true, subtree: true });\r\n      });\r\n    }\r\n  }\r\n\r\n  /** Highlight using element text content */\r\n  highlightTextContent() {\r\n    if (!this.highlight) {\r\n      if (this.el.tagName.toLowerCase() === 'code') {\r\n        this.highlightElement(this.el, this.el.innerText.trim());\r\n      } else {\r\n        console.warn(`[HighlightDirective]: Use 'highlight' on <code> element only`);\r\n      }\r\n    } else if (this.highlight === 'all') {\r\n      this.highlightChildren(this.el, 'pre code');\r\n    } else {\r\n      this.highlightChildren(this.el, this.highlight);\r\n    }\r\n  }\r\n\r\n  /** Highlight a code block */\r\n  highlightElement(el: HTMLElement, code: string) {\r\n\r\n    const res: HighlightResult = this.hljs.highlightAuto(code, this.language);\r\n    if (res.value !== el.innerHTML) {\r\n      this.renderer.addClass(el, 'hljs');\r\n      this.renderer.setProperty(el, 'innerHTML', res.value);\r\n      this.highlighted.emit(res);\r\n    }\r\n  }\r\n\r\n  /** Highlight multiple code blocks */\r\n  highlightChildren(el: HTMLElement, selector: string) {\r\n\r\n    const codeElements = el.querySelectorAll(selector);\r\n\r\n    /** highlight children with the same selector */\r\n    from(codeElements).pipe(\r\n      filter((code: HTMLElement) => code.childNodes.length === 1 && code.childNodes[0].nodeName === '#text'),\r\n      map((codeElement: HTMLElement) => this.highlightElement(codeElement, codeElement.innerText.trim())),\r\n      take(1)\r\n    ).subscribe();\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    /** Disconnect MutationObserver */\r\n    if (!this.code && this.hljs.options.auto) {\r\n      this.domObs.disconnect();\r\n    }\r\n  }\r\n}\r\n"
  ],
  "names": [],
  "mappings": "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"
}
