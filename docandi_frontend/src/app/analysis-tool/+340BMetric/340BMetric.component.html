<div class="m-grid__item m-grid__item--fluid  m-grid m-grid--ver-desktop m-grid--desktop m-container m-container--responsive m-container--xxl m-page__container m-body" style="padding-top:100px;"> 
    <div class="m-grid__item m-grid__item--fluid m-wrapper">
        <div class="m-subheader ">
            <div class="d-flex align-items-center">
                <div class="mr-auto">
                    <h3 class="m-subheader__title ">340B Usage</h3>			
                </div>
                <div class="admin-metrics-download text-right">
                    <a (click)="download_csv()" style="color:#36a3f7"> Download CSV</a>
                    <!-- <img src="assets/images/svc-icon-download.jpg"> -->
                </div>
                <div class='box-datetime-1'>
                    <div class="form-group" >
                        <ng-datepicker [ngModel]="dateFrom" (ngModelChange)="handleDateFromChange($event)"></ng-datepicker>
                        <!-- <datetime [ngModel]="dateFrom" (ngModelChange)="handleDateFromChange($event)" [timepicker]="false"></datetime> -->
                    </div>
                </div>
                <div class="box-hrr"> - </div>
                <div class='box-datetime-1'>
                    <div class="form-group" >
                          <ng-datepicker [ngModel]="dateTo" (ngModelChange)="handleDateToChange($event)"></ng-datepicker>
                        <!-- <datetime  (ngModelChange)="handleDateToChange($event)" [(ngModel)]="dateTo" [timepicker]="false"></datetime> -->
                    </div>
                </div>
                <div class="box-hrr"> &nbsp; </div>
                <div class="box-select-1">
                    <div class="form-group">
                        <select (change)="changeLocation()" class="form-control" [(ngModel)]="request.location_id" id="sel1">
                            <option value="0">All Locations</option>
                            <option value="{{item.id}}" *ngFor="let item of listClinic">
                                {{item.address}}
                            </option>
                        </select>
                    </div>
                </div>
            </div>
            
        </div> 
        <div class="m-content">
            <!--  of use -->
                <div class="m-portlet">
                    <div class="m-portlet__body  m-portlet__body--no-padding">
                        <div class="row m-row--no-padding m-row--col-separator-xl">
                            <div class="col-xl-4">                 
                                <div class="m-widget14">
                                    <div class="m-widget14__header">
                                        <h3 class="m-widget14__title">
                                                $ {{Total_patient}}    
                                        </h3>
                                        <span class="m-widget14__desc">
                                                in patient medication savings
                                        </span>
                                    </div>
                                    <div class="row  align-items-center">
                                            <canvas baseChart  width="2" height="1"
                                                [datasets]="barChartData"                                   
                                                [labels]="barChartLabels"
                                                [options]="barChartOptions"
                                                [colors]="barchartColors"
                                                [legend]="barChartLegend"
                                                [chartType]="barChartType"
                                                (chartHover)="chartHovered($event)"
                                                (chartClick)="chartClicked($event)">
                                        </canvas>
                                    </div>                       
                                </div>
                            </div>
                            <div class="col-xl-4">  
                                <div class="m-widget14">
                                    <div class="m-widget14__header">
                                        <h3 class="m-widget14__title">
                                                Conversion Rate          
                                        </h3>
                                        <span class="m-widget14__desc">
                                                to a contract pharmacy
                                        </span> 
                                    </div>   
                                    <canvas baseChart  width="2" height="1"
                                        [data]="doughnutChartData1"
                                        [labels]="doughnutChartLabels1"
                                        [colors]="chartColors"
                                        [chartType]="doughnutChartType"
                                        (chartHover)="chartHovered($event)"
                                        (chartClick)="chartClicked($event)">
                                    </canvas>                   
                                </div>  
                            </div>
                            <div class="col-xl-4">
                                <!--begin:: Widgets/Profit Share-->
                                <div class="m-widget14">
                                    <div class="m-widget14__header">
                                        <h3 class="m-widget14__title">
                                            Reasons For Not Switching        
                                        </h3>
                                        <span class="m-widget14__desc">
                                            to a contract pharmacy
                                        </span> 
                                    </div>
                                    <canvas baseChart width="2" height="1"
                                    [data]="doughnutChartData2"
                                    [labels]="doughnutChartLabels2"
                                    [colors]="chartColors"
                                    [chartType]="doughnutChartType"
                                    (chartHover)="chartHovered($event)"
                                    (chartClick)="chartClicked($event)"></canvas>  
                                </div>
                               
                                <!--end:: Widgets/Profit Share-->			
                            </div>
                        </div>
  
                </div>   
            </div> 
            <div class="row">
                <div class="col-12 col-md-4">
                    <div class="m-portlet m-portlet--full-height  ">
                        <div class="m-portlet__head">
                            <div class="m-portlet__head-caption">
                                <div class="m-portlet__head-title">
                                    <h3 class="m-portlet__head-text">
                                        Top Current Pharmacies
                                    </h3>
                                </div>
                            </div>
                        </div>
                        <div class="m-portlet__body">
                            <div class="m-widget4">
                                <div class="m-widget4__item" *ngFor="let item of TopCurrentPharmacy" >
                                    <div class="m-widget4__img m-widget4__img--logo">							 
                                        <img src="{{item.logo}}" alt="">   
                                    </div>
                                    <div class="m-widget4__info">
                                        <span class="m-widget4__title">
                                                {{item.name}}
                                        </span>
                                        <br> 
                                        <span class="m-widget4__sub">
                                                {{item.address}}
                                        </span>		 
                                    </div>
                                </div>	 
                            </div>			 
                        </div>
                    </div>
                </div>
                <div class="col-12 col-md-4">
                    <div class="m-portlet m-portlet--full-height  ">
                        <div class="m-portlet__head">
                            <div class="m-portlet__head-caption">
                                <div class="m-portlet__head-title">
                                    <h3 class="m-portlet__head-text">
                                        Top Switch Locations
                                    </h3>
                                </div>
                            </div>
                        </div>
                        <div class="m-portlet__body">
                            <div class="m-widget4">
                                <div class="m-widget4__item" *ngFor="let item of TopSwitchLocation">
                                    <div class="m-widget4__img m-widget4__img--logo">							 
                                        <img src="{{item.logo}}">   
                                    </div>
                                    <div class="m-widget4__info">
                                        <span class="m-widget4__title">
                                                {{item.name}}
                                        </span><br> 
                                        <span class="m-widget4__sub">
                                                {{item.address}}
                                        </span>		 
                                    </div>
                                    <!-- <span class="m-widget4__ext">
                                        <span class="m-widget4__number m--font-brand">+$2500</span>
                                    </span>	 -->
                                </div>	 
                            </div>			 
                        </div>
                    </div>
                </div>
                <div class="col-12 col-md-4">
                    <div class="m-portlet m-portlet--full-height">           
                        <div class="m-widget14" style="padding:0;">
                            <div class="m-widget14__header" style="padding-top:20px; padding-bottom:0px; padding-left:20px;border-bottom: 1px solid #ebedf2">
                                <h3 class="m-widget14__title">
                                        For Individuals Who Switched     
                                </h3>
                                <span class="m-widget14__desc">
                                        {{recommendedPercent}}% picked recommended pharmacies
                                </span> 
                            </div>
                        </div>
                        <div style="margin-top:20px">
                             <canvas baseChart  width="5" height="4"
                            [data]="doughnutChartData3"
                            [labels]="doughnutChartLabels3"
                            [colors]="chartColors3"
                            [chartType]="doughnutChartType"
                            (chartHover)="chartHovered($event)"
                            (chartClick)="chartClicked($event)"></canvas>      
                        </div>   
                    </div>

                </div>
            </div>  
        </div> 
    </div> 
</div>

<style>
    .m-subheader {
         padding: 0;
    }
    .m-widget4 .m-widget4__item .m-widget4__img.m-widget4__img--logo img {
        width: 5.5rem;
        border-radius: 0;
    }

   .box-select-1 .form-group select{
    margin-top: 10px;
   height: 35px;
   }
   .box-datetime-1 {
    z-index: 10;
   }
   .box-datetime-1 .form-group{
    margin-top: 10px;
   }
   .admin-metrics-download a{
       color:#36a3f7" 
   }
   #sel1 {
       padding:0;
   }       
</style>